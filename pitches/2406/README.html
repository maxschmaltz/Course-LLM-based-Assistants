<!doctype html>
<html class="no-js" lang="en" data-content_root="../../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../../genindex.html" /><link rel="search" title="Search" href="../../search.html" /><link rel="next" title="26.06. Pitch: Handling Customer Requests in a Multi-agent Environment" href="../2606/README.html" /><link rel="prev" title="Under development" href="../../sessions/block3_wrapup/under_development.html" />

    <!-- Generated with Sphinx 7.4.7 and Furo 2024.08.06 -->
        <title>24.06. Pitch: RAG Chatbot - LLM-based Assistants</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-extensions.css?v=302659d7" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../index.html"><div class="brand">LLM-based Assistants</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../index.html">
  
  
  <span class="sidebar-brand-text">LLM-based Assistants</span>
  
</a><form class="sidebar-search-container" method="get" action="../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Infos and Stuff</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../infos/topic_overview.html">Topics Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../infos/formats/debates.html">Debates</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../infos/formats/pitches.html">Pitches</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../infos/llm_inference_guide/README.html">LLM Inference Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Block 1: Intro</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../sessions/block1_intro/2204.html">22.04. LLMs as a Form of Intelligence vs LLMs as Statistical Machines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sessions/block1_intro/2404.html">24.04. LLM &amp; Agent Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sessions/block1_intro/2904/2904.html">29.04. Intro to LangChain 🦜🔗</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Block 2: Core Topics | Part 1: Business Applications</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../sessions/block2_core_topics/pt1_business/0605.html">06.05. Virtual Assistants Pt. 1: Chatbots</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sessions/block2_core_topics/pt1_business/0805/0805.html">08.05. Basic LLM-based Chatbot 🤖</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sessions/block2_core_topics/pt1_business/1305.html">13.05. Virtual Assistants Pt. 2: RAG</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sessions/block2_core_topics/pt1_business/1505/1505.html">15.05. RAG Chatbot Pt. 1 📚</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sessions/block2_core_topics/pt1_business/2005/2005.html">20.05. RAG Chatbot Pt. 2 📚</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sessions/block2_core_topics/pt1_business/2705/2705.html">27.05. Multi-agent Environment 👾🤖👾</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sessions/block2_core_topics/pt1_business/2205.html">22.05. Virtual Assistants Pt. 3: Multi-agent Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sessions/block2_core_topics/pt1_business/0306.html">03.06. LLMs in Software Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sessions/block2_core_topics/pt1_business/0506/0506.html">05.06. LLM-powered Website 💻</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Block 2: Core Topics | Part 2: Applications in Science</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../sessions/block2_core_topics/pt2_science/under_development.html">Under development</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Block 3: Wrap-up</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../sessions/block3_wrapup/under_development.html">Under development</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Pitches</span></p>
<ul class="current">
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">24.06. <em>Pitch</em>: RAG Chatbot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2606/README.html">26.06. <em>Pitch</em>: Handling Customer Requests in a Multi-agent Environment</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section class="tex2jax_ignore mathjax_ignore" id="pitch-rag-chatbot">
<h1>24.06. <em>Pitch</em>: RAG Chatbot<a class="headerlink" href="#pitch-rag-chatbot" title="Link to this heading">¶</a></h1>
<p>In this pitch, the contractor has to present their implementation of a RAG Chatbot for internal data of an imaginary company. The pipeline will run an Adaptive-RAG architecture and will implement an LLM-based reranking of the retrieved documents. For simplicity, the chatbot won’t have any memory and will answer each query independently.</p>
<section id="task">
<h2>Task<a class="headerlink" href="#task" title="Link to this heading">¶</a></h2>
<p>The project folder has the following structure:</p>
<ol class="arabic simple">
<li><p>The <a class="reference external" href="https://github.com/maxschmaltz/Course-LLM-based-Assistants/tree/main/llm-based-assistants/pitches/2406/resources"><code class="docutils literal notranslate"><span class="pre">resources</span></code> folder</a> contains the files that simulate an internal database of an imaginary company. Your system will retrieve specific information from these documents. The resources are one PDF and one MD containing the description and the rules of a <a class="reference external" href="https://www.kaggle.com/competitions/openai-to-z-challenge/overview">currently ongoing hackathon</a>, respectively. The hackathon started a few weeks ago so LLMs do not have information about it.</p></li>
<li><p>The <a class="reference external" href="https://github.com/maxschmaltz/Course-LLM-based-Assistants/tree/main/llm-based-assistants/pitches/2406/rag_chatbot"><code class="docutils literal notranslate"><span class="pre">rag_chatbot</span></code> folder</a> folder will store the implementation of your system.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/maxschmaltz/Course-LLM-based-Assistants/tree/main/llm-based-assistants/pitches/2406/rag_chatbot/data_manipulation.py"><code class="docutils literal notranslate"><span class="pre">data_manipulation.py</span></code></a> will contain the functionality related to data preprocessing and storage: loading, chunking, indexing.</p></li>
<li><p><a class="reference external" href="https://github.com/maxschmaltz/Course-LLM-based-Assistants/tree/main/llm-based-assistants/pitches/2406/rag_chatbot/agent.py"><code class="docutils literal notranslate"><span class="pre">agent.py</span></code></a> will implement the Adaptive-RAG pipeline.</p></li>
<li><p><a class="reference external" href="https://github.com/maxschmaltz/Course-LLM-based-Assistants/tree/main/llm-based-assistants/pitches/2406/rag_chatbot/main.py"><code class="docutils literal notranslate"><span class="pre">main.py</span></code></a> will assemble and initialize the whole thing together; it will construct the index from <code class="docutils literal notranslate"><span class="pre">data_manipulation.py</span></code>, give it to the agent from <code class="docutils literal notranslate"><span class="pre">agent.py</span></code>, and initialize the system to be able to be queried.</p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://github.com/maxschmaltz/Course-LLM-based-Assistants/tree/main/llm-based-assistants/pitches/2406/demo.ipynb"><code class="docutils literal notranslate"><span class="pre">demo.ipynb</span></code></a> will showcase the capabilities and the limitations of the resulting system. It will take the initialized RAG chatbot from <code class="docutils literal notranslate"><span class="pre">rag_chatbot/main.py</span></code> and query it with a few examples.</p></li>
</ol>
<p>Your task is to fill in the code in the provided boilerplates following the instructions <a class="reference internal" href="#steps"><span class="xref myst">below</span></a>.</p>
<ul class="simple">
<li><p>You may use any tools for data preprocessing, any LLM, any embedding model, and any orchestration framework you like.</p></li>
<li><p>You are free in your implementation as long as it follows the architectural constrains (implements a version of Adaptive-RAG).</p></li>
<li><p>You don’t have to strictly follow the boilerplate, it is just a quick start suggestion; if you think it fits your solution better, feel free to remove/edit the suggested functions as well as add your. The only limitation you have here is that the solution should be written as Python scripts (not a notebook!), and it should be called from <code class="docutils literal notranslate"><span class="pre">demo.ipynb</span></code>.</p></li>
</ul>
<p>You don’t have to find a perfect solution, imagine you are building an initial baseline; this activity is more about detecting the limitations and vulnerabilities of your own work and suggesting the ways to improve. Most importantly, you have to be able to explain your design choices and justify them for this particular use case.</p>
</section>
<section id="steps">
<h2>Steps<a class="headerlink" href="#steps" title="Link to this heading">¶</a></h2>
<section id="setup">
<h3>Setup<a class="headerlink" href="#setup" title="Link to this heading">¶</a></h3>
<ol class="arabic simple">
<li><p>Download the <a class="reference external" href="https://github.com/maxschmaltz/Course-LLM-based-Assistants/tree/main/llm-based-assistants/pitches/2406">project folder</a>.</p></li>
<li><p>Go through the <a class="reference external" href="https://maxschmaltz.github.io/Course-LLM-based-Assistants/infos/llm_inference_guide/README.html">usual setup routine</a> to setup your environment for the project. Put the resulting <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> file with the dependencies in the project folder.</p></li>
</ol>
</section>
<section id="data-preprocessing-in-rag-chatbot-data-manipulation-py">
<h3>Data Preprocessing in <code class="docutils literal notranslate"><span class="pre">rag_chatbot/data_manipulation.py</span></code><a class="headerlink" href="#data-preprocessing-in-rag-chatbot-data-manipulation-py" title="Link to this heading">¶</a></h3>
<ol class="arabic simple">
<li><p><strong>Data Loading (<code class="docutils literal notranslate"><span class="pre">load_data()</span></code>)</strong></p></li>
</ol>
<ul class="simple">
<li><p>Write code to load all files from the specified folder.</p></li>
<li><p>Handle multiple file formats (PDF, Markdown).</p></li>
<li><p>For each file, create a <code class="docutils literal notranslate"><span class="pre">Document</span></code> object with its content and relevant metadata (such as filename or file type).</p></li>
<li><p>Return a list of all loaded <code class="docutils literal notranslate"><span class="pre">Document</span></code> objects.</p></li>
</ul>
<ol class="arabic simple" start="2">
<li><p><strong>Chunking (<code class="docutils literal notranslate"><span class="pre">split_data()</span></code>)</strong></p></li>
</ol>
<ul class="simple">
<li><p>Write code to split each document into smaller, manageable chunks (e.g., by paragraph, sentence, or fixed token size).</p></li>
<li><p>Ensure each chunk is a <code class="docutils literal notranslate"><span class="pre">Document</span></code> object, preserving or updating metadata as needed.</p></li>
<li><p>Return a list of all chunked <code class="docutils literal notranslate"><span class="pre">Document</span></code> objects.</p></li>
</ul>
<ol class="arabic simple" start="3">
<li><p><strong>Indexing (<code class="docutils literal notranslate"><span class="pre">create_index()</span></code>)</strong></p></li>
</ol>
<ul class="simple">
<li><p>Write code to create an index from the provided document chunks.</p></li>
<li><p>Store the resulting index persistently in the <code class="docutils literal notranslate"><span class="pre">knowledge/</span></code> folder for later retrieval.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">init_index()</span></code> will serve as the entry point for data preprocessing and indexing in <code class="docutils literal notranslate"><span class="pre">rag_chatbot/main.py</span></code>, you don’t have to change anything.</p>
<p>As a reminder, you may choose any data loader, text splitter, embedding model etc. as long as you can explain the choice. If you need, you may add any preprocessing steps you want.</p>
</section>
<section id="adaptive-rag-in-rag-chatbot-agent-py">
<h3>Adaptive-RAG in <code class="docutils literal notranslate"><span class="pre">rag_chatbot/agent.py</span></code><a class="headerlink" href="#adaptive-rag-in-rag-chatbot-agent-py" title="Link to this heading">¶</a></h3>
<p>Here, you have to implement an Adaptive-RAG pipeline from <a class="reference external" href="https://arxiv.org/abs/2403.14403">this paper</a>. The key idea is simple: given the query, the system first decides whether it is a straightforward, a simple, or a complex query, and then performs no RAG, one- or multi-step RAG, respectively, to answer the question. Additionally, you will have to perform an LLM-based reranking of the retrieved documents for RAG (both one- and multi-step).</p>
<p>Complete the <code class="docutils literal notranslate"><span class="pre">AdaptiveRAGAgent</span></code> class as follows:</p>
<ol class="arabic simple">
<li><p><strong>Initialization (<code class="docutils literal notranslate"><span class="pre">__init__()</span></code>)</strong></p></li>
</ol>
<ul class="simple">
<li><p>Load the document index from the <code class="docutils literal notranslate"><span class="pre">knowledge/</span></code> folder (the assembly procedure in the main file will make sure the knowledge base has been created by that time).</p></li>
<li><p>Initialize your LLM and any retriever needed for RAG.</p></li>
<li><p>Replace the placeholder for the keyword arguments (<code class="docutils literal notranslate"><span class="pre">**kwargs</span></code>) with specific parameters that you need to initialize the agent (or none, if none is needed), and adjust the <code class="docutils literal notranslate"><span class="pre">init_rag_agent()</span></code> arguments accordingly.</p></li>
</ul>
<ol class="arabic simple" start="2">
<li><p><strong>Query Classification (<code class="docutils literal notranslate"><span class="pre">classify()</span></code>)</strong></p></li>
</ol>
<ul class="simple">
<li><p>Implement logic to classify the input query as “direct”, “simple RAG”, or “iterative RAG”.</p></li>
<li><p>It can be a separate lightweight LLM, or the main LLM you use in the system, it’s up to you.</p></li>
</ul>
<ol class="arabic simple" start="3">
<li><p><strong>Document Reranking (<code class="docutils literal notranslate"><span class="pre">rerank()</span></code>)</strong></p></li>
</ol>
<ul class="simple">
<li><p>Use your LLM to rerank a list of retrieved <code class="docutils literal notranslate"><span class="pre">Document</span></code> objects based on their relevance to the query.</p></li>
<li><p>Return the reranked list.</p></li>
</ul>
<ol class="arabic simple" start="4">
<li><p><strong>Direct Answering (<code class="docutils literal notranslate"><span class="pre">answer_directly()</span></code>)</strong></p></li>
</ol>
<ul class="simple">
<li><p>For “direct” queries, answer using only the LLM without retrieving from the index.</p></li>
</ul>
<ol class="arabic simple" start="5">
<li><p><strong>Simple RAG (<code class="docutils literal notranslate"><span class="pre">simple_rag()</span></code>)</strong></p></li>
</ol>
<ul class="simple">
<li><p>For “simple RAG” queries, retrieve relevant documents from the index, rerank them, and use the top results as context for the LLM to answer.</p></li>
</ul>
<ol class="arabic simple" start="6">
<li><p><strong>Iterative RAG (<code class="docutils literal notranslate"><span class="pre">iterative_rag()</span></code>)</strong></p></li>
</ol>
<ul class="simple">
<li><p>For “iterative RAG” queries, perform multi-step retrieval and reasoning, retrieve, rerank, and possibly refine the query or context in multiple steps.</p></li>
</ul>
<ol class="arabic simple" start="7">
<li><p><strong>Agent Run (<code class="docutils literal notranslate"><span class="pre">run()</span></code>)</strong></p></li>
</ol>
<ul class="simple">
<li><p>Route the query through the classification step and call the appropriate answering method based on the result.</p></li>
<li><p>Ensure the transparent output: reasoning steps, predicted query class, retrieved documents etc.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">init_rag_agent()</span></code> will serve as the entry point for agent initialization <code class="docutils literal notranslate"><span class="pre">rag_chatbot/main.py</span></code>, you don’t have to change anything.</p>
<p>Additional notes:</p>
<ul class="simple">
<li><p>If you will be using <code class="docutils literal notranslate"><span class="pre">LangGraph</span></code> as the orchestration framework, create a state scheme and replace the <code class="docutils literal notranslate"><span class="pre">query</span></code> parameter in the function to the <code class="docutils literal notranslate"><span class="pre">state</span></code> parameter.</p></li>
<li><p>Build the routing logic in a separate function according to your framework (e.g. specify edges and nodes for <code class="docutils literal notranslate"><span class="pre">LangGraph</span></code>).</p></li>
<li><p>Once again, you may add/edit anything you want (except the LLM-based reranking remains required) as long as it sticks to the general Adaptive-RAG framework.</p></li>
</ul>
</section>
<section id="initialization-in-rag-chatbot-main-py">
<h3>Initialization in <code class="docutils literal notranslate"><span class="pre">rag_chatbot/main.py</span></code><a class="headerlink" href="#initialization-in-rag-chatbot-main-py" title="Link to this heading">¶</a></h3>
<p>The main function simply creates and stores the index and then initializes the RAG chatbot. All you need to do is to adjust the parameters of the function <code class="docutils literal notranslate"><span class="pre">init_pipeline()</span></code> to match the ones in the RAG chatbot initialization function (<code class="docutils literal notranslate"><span class="pre">init_rag_agent()</span></code>).</p>
</section>
<section id="demonstration-in-demo-ipynb">
<h3>Demonstration in <code class="docutils literal notranslate"><span class="pre">demo.ipynb</span></code><a class="headerlink" href="#demonstration-in-demo-ipynb" title="Link to this heading">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">rag_chatbot/main.py</span></code> provides you the function <code class="docutils literal notranslate"><span class="pre">init_pipeline()</span></code> to easily instantiate the pipeline. Define the parameter values you need for the function and call it to assemble the whole thing. It will return a run-ready instance of the <code class="docutils literal notranslate"><span class="pre">AdaptiveRAGAgent</span></code> class. The notebook already contains 10 questions for which you will have to show the outputs during the presentation. Feel free to add yours if you think it will showcase some specific properties of your system better.</p>
</section>
</section>
<section id="deliverables-logistics">
<h2>Deliverables &amp; Logistics<a class="headerlink" href="#deliverables-logistics" title="Link to this heading">¶</a></h2>
<ol class="arabic simple">
<li><p>Prepare slides that would present your solution to the “company board” (your fellow students). The slides should highlight the design decisions step by step (data preprocessing, chatbot pipeline etc.), explain the choices of the tools, LLMs etc., so basically justify why you implemented the system the way you did. It should then inspect the outputs of the system (the 10 questions from the demo notebook as well as yours if applicable) in detail and provide a qualitative analysis of those. Finally, it should discuss the current limitations and possible workarounds.</p></li>
<li><p>With these slides, you will hold a presentation (30-40 min). After that, you have to be ready to answer the questions from the board.</p></li>
<li><p>Put the complete code and the slides to a GitHub repository. It may be private if you want, then you will have to send an invitation for the username <code class="docutils literal notranslate"><span class="pre">maxschmaltz</span></code>. The submission succeeds via email, and the deadline is June 24, 12pm. Note: if you will put the files to the repo manually, don’t forget to exclude environment variables, dependencies etc.</p></li>
</ol>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./pitches/2406"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>
        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="../2606/README.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">26.06. <em>Pitch</em>: Handling Customer Requests in a Multi-agent Environment</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="../../sessions/block3_wrapup/under_development.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Under development</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2025, Maksim Shmalts
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              <a class="muted-link footer-icon" href="https://github.com/maxschmaltz/Course-LLM-based-Assistants" aria-label="GitHub"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 18 18">
          <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path>
</svg>
</a>
              <a class="muted-link footer-icon" href="https://github.com/maxschmaltz/Course-LLM-based-Assistants/issues/new" aria-label="Issues"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 18 18">
  <path d="M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"/>
  <path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zm.1-6.995a.905.905 0 0 1 1.8 0l-.35 4.5a.55.55 0 0 1-1.1 0l-.35-4.5z"/>
</svg>
</a>
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">24.06. <em>Pitch</em>: RAG Chatbot</a><ul>
<li><a class="reference internal" href="#task">Task</a></li>
<li><a class="reference internal" href="#steps">Steps</a><ul>
<li><a class="reference internal" href="#setup">Setup</a></li>
<li><a class="reference internal" href="#data-preprocessing-in-rag-chatbot-data-manipulation-py">Data Preprocessing in <code class="docutils literal notranslate"><span class="pre">rag_chatbot/data_manipulation.py</span></code></a></li>
<li><a class="reference internal" href="#adaptive-rag-in-rag-chatbot-agent-py">Adaptive-RAG in <code class="docutils literal notranslate"><span class="pre">rag_chatbot/agent.py</span></code></a></li>
<li><a class="reference internal" href="#initialization-in-rag-chatbot-main-py">Initialization in <code class="docutils literal notranslate"><span class="pre">rag_chatbot/main.py</span></code></a></li>
<li><a class="reference internal" href="#demonstration-in-demo-ipynb">Demonstration in <code class="docutils literal notranslate"><span class="pre">demo.ipynb</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#deliverables-logistics">Deliverables &amp; Logistics</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/scripts/furo.js?v=5fa4622c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    </body>
</html>